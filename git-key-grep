#!/usr/bin/env bash
#
# Searches a git repository for API keys.

USAGE=''
LONG_USAGE=$(cat <<EOM
Usage: git key-grep
EOM
)
SUBDIRECTORY_OK=Yes
NONGIT_OK=No
. "$(git --exec-path)/git-sh-setup"   # see git-sh-setup(1)

main() {
  if [ $# -lt 0 ]; then
    usage
    exit 1
  fi

  grep -vE -e '^[[:space:]]*#' regexps | git grep -E -f -
}

main "$@"
